{"ast":null,"code":"var _jsxFileName = \"/home/jonesbass/Downloads/react-iniciante-feature-10/web/src/components/Promotion/Modal/Modal.js\";\nimport React, { useEffect, useState } from 'react';\nimport UIModal from 'components/UI/Modal/Modal';\nimport useApi from 'components/utils/useApi';\nimport PromotionModalCommentsTree from './CommentsTree/CommentsTree';\nimport './Modal.css';\n\nconst PromotionModal = ({\n  promotionId,\n  onClickClose\n}) => {\n  const [comment, setComment] = useState('');\n  const [load, loadInfo] = useApi({\n    url: '/comments',\n    params: {\n      promotionId,\n      _expand: 'user'\n    }\n  });\n  const [sendComment, sendCommentInfo] = useApi({\n    url: '/comments',\n    method: 'POST'\n  });\n  useEffect(() => {\n    load(); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  async function onSubmit(ev) {\n    ev.preventDefault();\n\n    try {\n      await sendComment({\n        data: {\n          userId: 1,\n          promotionId,\n          comment\n        }\n      });\n      setComment('');\n      load({\n        quietly: true\n      });\n    } catch (e) {}\n  }\n\n  async function sendAnswer(text, parentId) {\n    await sendComment({\n      data: {\n        userId: 1,\n        promotionId,\n        comment: text,\n        parentId\n      }\n    });\n    load({\n      quietly: true\n    });\n  }\n\n  return /*#__PURE__*/React.createElement(UIModal, {\n    isOpen: true,\n    onClickClose: onClickClose,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    className: \"promotion-modal__comment-form\",\n    onSubmit: onSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"textarea\", {\n    placeholder: \"Comentar...\",\n    onChange: ev => setComment(ev.target.value),\n    value: comment,\n    disabled: sendCommentInfo.loading,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    disabled: sendCommentInfo.loading,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 9\n    }\n  }, sendCommentInfo.loading ? 'Enviando...' : 'Enviar')), /*#__PURE__*/React.createElement(PromotionModalCommentsTree, {\n    comments: loadInfo.data,\n    sendComment: sendAnswer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }\n  }));\n};\n\nexport default PromotionModal;","map":{"version":3,"sources":["/home/jonesbass/Downloads/react-iniciante-feature-10/web/src/components/Promotion/Modal/Modal.js"],"names":["React","useEffect","useState","UIModal","useApi","PromotionModalCommentsTree","PromotionModal","promotionId","onClickClose","comment","setComment","load","loadInfo","url","params","_expand","sendComment","sendCommentInfo","method","onSubmit","ev","preventDefault","data","userId","quietly","e","sendAnswer","text","parentId","target","value","loading"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,OAAOC,OAAP,MAAoB,2BAApB;AACA,OAAOC,MAAP,MAAmB,yBAAnB;AACA,OAAOC,0BAAP,MAAuC,6BAAvC;AACA,OAAO,aAAP;;AAEA,MAAMC,cAAc,GAAG,CAAC;AAAEC,EAAAA,WAAF;AAAeC,EAAAA;AAAf,CAAD,KAAmC;AACxD,QAAM,CAACC,OAAD,EAAUC,UAAV,IAAwBR,QAAQ,CAAC,EAAD,CAAtC;AACA,QAAM,CAACS,IAAD,EAAOC,QAAP,IAAmBR,MAAM,CAAC;AAC9BS,IAAAA,GAAG,EAAE,WADyB;AAE9BC,IAAAA,MAAM,EAAE;AACNP,MAAAA,WADM;AAENQ,MAAAA,OAAO,EAAE;AAFH;AAFsB,GAAD,CAA/B;AAQA,QAAM,CAACC,WAAD,EAAcC,eAAd,IAAiCb,MAAM,CAAC;AAC5CS,IAAAA,GAAG,EAAE,WADuC;AAE5CK,IAAAA,MAAM,EAAE;AAFoC,GAAD,CAA7C;AAKAjB,EAAAA,SAAS,CAAC,MAAM;AACdU,IAAAA,IAAI,GADU,CAEd;AACD,GAHQ,EAGN,EAHM,CAAT;;AAKA,iBAAeQ,QAAf,CAAwBC,EAAxB,EAA4B;AAC1BA,IAAAA,EAAE,CAACC,cAAH;;AACA,QAAI;AACF,YAAML,WAAW,CAAC;AAChBM,QAAAA,IAAI,EAAE;AACJC,UAAAA,MAAM,EAAE,CADJ;AAEJhB,UAAAA,WAFI;AAGJE,UAAAA;AAHI;AADU,OAAD,CAAjB;AAOAC,MAAAA,UAAU,CAAC,EAAD,CAAV;AACAC,MAAAA,IAAI,CAAC;AAAEa,QAAAA,OAAO,EAAE;AAAX,OAAD,CAAJ;AACD,KAVD,CAUE,OAAOC,CAAP,EAAU,CAAE;AACf;;AAED,iBAAeC,UAAf,CAA0BC,IAA1B,EAAgCC,QAAhC,EAA0C;AACxC,UAAMZ,WAAW,CAAC;AAChBM,MAAAA,IAAI,EAAE;AACJC,QAAAA,MAAM,EAAE,CADJ;AAEJhB,QAAAA,WAFI;AAGJE,QAAAA,OAAO,EAAEkB,IAHL;AAIJC,QAAAA;AAJI;AADU,KAAD,CAAjB;AAQAjB,IAAAA,IAAI,CAAC;AAAEa,MAAAA,OAAO,EAAE;AAAX,KAAD,CAAJ;AACD;;AAED,sBACE,oBAAC,OAAD;AAAS,IAAA,MAAM,MAAf;AAAgB,IAAA,YAAY,EAAEhB,YAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAM,IAAA,SAAS,EAAC,+BAAhB;AAAgD,IAAA,QAAQ,EAAEW,QAA1D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AACE,IAAA,WAAW,EAAC,aADd;AAEE,IAAA,QAAQ,EAAGC,EAAD,IAAQV,UAAU,CAACU,EAAE,CAACS,MAAH,CAAUC,KAAX,CAF9B;AAGE,IAAA,KAAK,EAAErB,OAHT;AAIE,IAAA,QAAQ,EAAEQ,eAAe,CAACc,OAJ5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,eAOE;AAAQ,IAAA,IAAI,EAAC,QAAb;AAAsB,IAAA,QAAQ,EAAEd,eAAe,CAACc,OAAhD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGd,eAAe,CAACc,OAAhB,GAA0B,aAA1B,GAA0C,QAD7C,CAPF,CADF,eAYE,oBAAC,0BAAD;AACE,IAAA,QAAQ,EAAEnB,QAAQ,CAACU,IADrB;AAEE,IAAA,WAAW,EAAEI,UAFf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAZF,CADF;AAmBD,CAlED;;AAoEA,eAAepB,cAAf","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport UIModal from 'components/UI/Modal/Modal';\nimport useApi from 'components/utils/useApi';\nimport PromotionModalCommentsTree from './CommentsTree/CommentsTree';\nimport './Modal.css';\n\nconst PromotionModal = ({ promotionId, onClickClose }) => {\n  const [comment, setComment] = useState('');\n  const [load, loadInfo] = useApi({\n    url: '/comments',\n    params: {\n      promotionId,\n      _expand: 'user',\n    },\n  });\n\n  const [sendComment, sendCommentInfo] = useApi({\n    url: '/comments',\n    method: 'POST',\n  });\n\n  useEffect(() => {\n    load();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  async function onSubmit(ev) {\n    ev.preventDefault();\n    try {\n      await sendComment({\n        data: {\n          userId: 1,\n          promotionId,\n          comment,\n        },\n      });\n      setComment('');\n      load({ quietly: true });\n    } catch (e) {}\n  }\n\n  async function sendAnswer(text, parentId) {\n    await sendComment({\n      data: {\n        userId: 1,\n        promotionId,\n        comment: text,\n        parentId,\n      },\n    });\n    load({ quietly: true });\n  }\n\n  return (\n    <UIModal isOpen onClickClose={onClickClose}>\n      <form className=\"promotion-modal__comment-form\" onSubmit={onSubmit}>\n        <textarea\n          placeholder=\"Comentar...\"\n          onChange={(ev) => setComment(ev.target.value)}\n          value={comment}\n          disabled={sendCommentInfo.loading}\n        />\n        <button type=\"submit\" disabled={sendCommentInfo.loading}>\n          {sendCommentInfo.loading ? 'Enviando...' : 'Enviar'}\n        </button>\n      </form>\n      <PromotionModalCommentsTree\n        comments={loadInfo.data}\n        sendComment={sendAnswer}\n      />\n    </UIModal>\n  );\n};\n\nexport default PromotionModal;\n"]},"metadata":{},"sourceType":"module"}